{
  "family": "airflow-story-builder-task",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "1024",
  "memory": "3072",
  "containerDefinitions": [
        {
            "name": "story-builder-manager",
            "image": "{{ image }}",
            "cpu": 0,
            "portMappings": [
                {
                    "name": "story-builder-manager-80-tcp",
                    "containerPort": 80,
                    "hostPort": 80,
                    "protocol": "tcp",
                    "appProtocol": "http"
                },
                {
                    "name": "story-builder-manager-5432-tcp",
                    "containerPort": 5432,
                    "hostPort": 5432,
                    "protocol": "tcp"
                }
            ],
            "essential": true,
            "environment": [
                {
                    "name": "AUTH0_CLIENT_SECRET",
                    "value": "_DV1S75YDCfv1LwWGdezfMG-m4lXlt4a1b_i9ZePOxwHxp5KOKUebaD9oeJ6wzIn"
                },
                {
                    "name": "INSIGHTS_BACKEND_SERVER_HOST",
                    "value": "https://dev-api.leverslabs.com/insights/v1/"
                },
                {
                    "name": "AUTH0_CLIENT_ID",
                    "value": "olY1PMbVOF7DugKYX7O3JYjajsiCBLRj"
                },
                {
                    "name": "DATABASE_URL",
                    "value": "postgresql+asyncpg://postgres.agwubfkldrsdfdhhdsun:uMZ6G2zbaVDQk@aws-0-us-west-1.pooler.supabase.com:5432/postgres"
                },
                {
                    "name": "AUTH0_ISSUER",
                    "value": "https://insights-web-app.us.auth0.com/"
                },
                {
                    "name": "ANALYSIS_MANAGER_SERVER_HOST",
                    "value": "https://dev-api.leverslabs.com/analysis/v1/"
                },
                {
                    "name": "SECRET_KEY",
                    "value": "some-secret-key"
                },
                {
                    "name": "QUERY_MANAGER_SERVER_HOST",
                    "value": "https://dev-api.leverslabs.com/query/v1/"
                },
                {
                    "name": "SERVER_HOST",
                    "value": "http://localhost:8003"
                },
                {
                    "name": "AUTH0_API_AUDIENCE",
                    "value": "https://fulcrum_api_identifier"
                }
            ],
            "logConfiguration": {
                "logDriver": "awslogs",
                "options": {
                    "awslogs-group": "/ecs/airflow-story-builder-task",
                    "mode": "non-blocking",
                    "awslogs-create-group": "true",
                    "max-buffer-size": "25m",
                    "awslogs-region": "us-west-1",
                    "awslogs-stream-prefix": "ecs"
                },
                "secretOptions": []
            },
            "systemControls": []
        }
    ]
}
